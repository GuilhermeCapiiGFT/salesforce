<template>
	<div class="slds-card slds-p-horizontal_medium" style="overflow: hidden;" data-id="top-component">
	  <!-- <template if:false={isAnalysisStarted}>
		  <div class="btn-container">
			  <button class="btn" onclick={handleAnalysisStart}> Iniciar Análise </button>
		  </div>
	  </template> -->

		<template if:true={isReadyForAnalysis}>
		  <div class="btn-container">
			  <button class="btn" onclick={handleAnalysisStart}> Iniciar Análise </button>
		  </div>
	  </template>

	  <template if:true={isAnalysisStarted}>
		  <div class="btn-container">
			  <p>Análise Iniciada em {startDate}</p>
		  </div>
	  </template>

	  <div class="slds-progress slds-progress_vertical">
		  <ol class="slds-accordion slds-progress__list">

			  <!-- 1th Accordion -->
			  <div class="slds-progress__item">
				  <lightning-progress-ring value={generalInfoValue} variant={generalInfoVariant} class="progressCircle"></lightning-progress-ring>

				  <div class="slds-progress__item_content slds-m-vertical_medium" onclick={handleAccordionToggle} data-id="progressItem">
					  <li class="slds-accordion__list-item">
						  <section class="slds-accordion__section">
							  <div class="slds-accordion__summary">
								  <h2 class="slds-accordion__summary-heading">
									  <span class="geral slds-accordion__summary-content header-section">Geral</span>
								  </h2>
							  </div>
							  <!-- conteúdo aqui -->
						  </section>
					  </li>
				  </div>
			  </div>

			  <!-- 2th Accordion -->
			  <div class="slds-progress__item">
				  <lightning-progress-ring value={personalInfoValue} variant={personalInfoVariant} class="progressCircle">
				  </lightning-progress-ring>

				  <div class="slds-progress__item_content slds-m-vertical_medium">
					  <li class="slds-accordion__list-item">
						  <section class="slds-accordion__section ">
							  <div class="slds-accordion__summary">
								<h2 class="slds-accordion__summary-heading">
								  <span data-id="sectionPersonal" class="slds-accordion__summary-content dadosPessoais header-section" onclick={handleAccordionToggle}>
									  Dados Pessoais
								  </span>
								</h2>
							  </div>
							  <div class="slds-accordion__content" id="referenceId-38" >
								  <c-proposal-personal-data-component opportunityid={opportunityid} accountid={accountid} onsendinfo={setInfoValueAndVariant}></c-proposal-personal-data-component>
							  </div>
						  </section>
					  </li>
				  </div>
			  </div>

			  <!-- 3th Accordion -->
			  <div class="slds-progress__item">
				  <lightning-progress-ring value={contactInfoValue} variant={contactInfoVariant} class="progressCircle"></lightning-progress-ring>

				  <div class="slds-progress__item_content slds-m-vertical_medium" onclick={handleAccordionToggle} data-id="progressItem">
					  <li class="slds-accordion__list-item">
						  <section class="slds-accordion__section">
								<div class="slds-accordion__summary">
									<h2 class="slds-accordion__summary-heading">
										<span class="geral slds-accordion__summary-content header-section">Dados de Contato</span>
									</h2>
								</div>
								<div class="slds-accordion__content">
									<c-proposal-contact-data-component opportunityid={opportunityid} accountid={accountid} onsendinfo={setInfoValueAndVariant}></c-proposal-contact-data-component>
								</div>
						  </section>
					  </li>
				  </div>
			  </div>

			  <!-- 4th Accordion -->
			  <div class="slds-progress__item">
				  <lightning-progress-ring value={addressesInfoValue} variant={addressesInfoVariant} class="progressCircle"></lightning-progress-ring>

				  <div class="slds-progress__item_content slds-m-vertical_medium" onclick={handleAccordionToggle} data-id="progressItem">
					  <li class="slds-accordion__list-item">
						  <section class="slds-accordion__section">
							  <div class="slds-accordion__summary">
								  <h2 class="slds-accordion__summary-heading">
									  <span class="geral slds-accordion__summary-content header-section">Dados de Endereço</span>
								  </h2>
							  </div>
								<div class="slds-accordion__content">
									<c-proposal-addresses-component opportunityid={opportunityid} accountid={accountid} onsendinfo={setInfoValueAndVariant}></c-proposal-addresses-component>
								</div>
						  </section>
					  </li>
				  </div>
			  </div>

			  <!-- 5th Accordion -->
			  <div class="slds-progress__item">
				  <lightning-progress-ring value={incomeInfoValue} variant={incomeInfoVariant} class="progressCircle"></lightning-progress-ring>

				  <div class="slds-progress__item_content slds-m-vertical_medium" onclick={handleAccordionToggle} data-id="progressItem">
					  <li class="slds-accordion__list-item">
						  <section class="slds-accordion__section">
							  <div class="slds-accordion__summary">
								  <h2 class="slds-accordion__summary-heading">
									  <span class="geral slds-accordion__summary-content header-section">Dados de Renda</span>
								  </h2>
							  </div>
								<div class="slds-accordion__content">
									<c-proposal-income-data-component accountid={accountid} opportunityid={opportunityid} onsendinfo={setInfoValueAndVariant}></c-proposal-income-data-component>
								</div>
						  </section>
					  </li>
				  </div>
			  </div>

			  <!-- 6th Accordion -->
			  <div class="slds-progress__item">
				  <lightning-progress-ring value={warrantyInfoValue} variant={warrantyInfoVariant} class="progressCircle"></lightning-progress-ring>

				  <div class="slds-progress__item_content slds-m-vertical_medium" onclick={handleAccordionToggle} data-id="progressItem">
					  <li class="slds-accordion__list-item">
						  <section class="slds-accordion__section">
							  	<div class="slds-accordion__summary">
								  	<h2 class="slds-accordion__summary-heading">
									  	<span class="geral slds-accordion__summary-content header-section">Dados de Garantia</span>
								  	</h2>
							  	</div>
							  	<div class="slds-accordion__content">
									<c-proposal-warranty-component 
										opportunityid={opportunityid}
										onsendinfo={setInfoValueAndVariant}>
									</c-proposal-warranty-component>
								</div>
						  </section>
					  </li>
				  </div>
			  </div>

			  <!-- 7th Accordion -->
			  <div class="slds-progress__item">
				  <lightning-progress-ring value={operationInfoValue} variant={operationInfoVariant} class="progressCircle"></lightning-progress-ring>

				  <div class="slds-progress__item_content slds-m-vertical_medium" onclick={handleAccordionToggle} data-id="progressItem">
					  <li class="slds-accordion__list-item">
						  <section class="slds-accordion__section">
							  <div class="slds-accordion__summary">
								  <h2 class="slds-accordion__summary-heading">
									  <span class="geral slds-accordion__summary-content header-section">Operação</span>
								  </h2>
							  </div>
							  <div class="slds-accordion__content">
								  <c-proposal-operation-component opportunityid={opportunityid} onsendinfo={setInfoValueAndVariant}></c-proposal-operation-component>
							  </div>
						  </section>
					  </li>
				  </div>
			  </div>

			  <!-- 8th Accordion -->
			  <div class="slds-progress__item">
				<lightning-progress-ring value={quickLinksInfoValue} variant={quickLinksInfoVariant} class="progressCircle"></lightning-progress-ring>

				<div class="slds-progress__item_content slds-m-vertical_medium" onclick={handleAccordionToggle} data-id="progressItem">
					<li class="slds-accordion__list-item">
						<section class="slds-accordion__section">
							<div class="slds-accordion__summary">
								<h2 class="slds-accordion__summary-heading">
									<span class="geral slds-accordion__summary-content header-section">Links Rápidos</span>
								</h2>
							</div>
							<div class="slds-accordion__content">
								<c-proposal-quick-links-component></c-proposal-quick-links-component>
							</div>
						</section>
					</li>
				</div>
			</div>

		  </ol>
	  </div>

	  <div class="btn-container slds-m-vertical_medium">
		  <button class="btn reprovado" data-id="reject-btn" onclick={sendAnalysis} disabled> Reprovar </button>
		  <button class="btn pendenciado" data-id="pending-btn" onclick={sendAnalysis} disabled> Pendenciar </button>
		  <button class="btn aprovado" data-id="approve-btn" onclick={sendAnalysis} disabled> Aprovar </button>
	  </div>


	  <template if:true={openModalReason}>
		  <c-modal-reason
			  onselectedreason={handlerSelectedReason}
			  type-reason={modalReason}
			  field-reason={modalReasonField}
			  object-reason={modalReasonObject}>
		  </c-modal-reason>
	  </template>

	  <template if:true={openModalRejection}>
		  <c-modal-proposal-reject
			  onclosemodal={handlerCloseModalRejection}>
		  </c-modal-proposal-reject>
	  </template>

	  <template if:true={openModalPendency}>
		  <c-modal-proposal-pendency
			  onclosemodal={handlerCloseModalPendency}
			  onpending={handlerAnalysisPending}>
		  </c-modal-proposal-pendency>
	  </template>

	  <template if:true={openModalApprove}>
		  <c-modal-proposal-approve
			  onclosemodal={handlerCloseModalApprove}
			  onapprove={handlerAnaylisApprovement}>
		  </c-modal-proposal-approve>
	  </template>

	</div>
</template>