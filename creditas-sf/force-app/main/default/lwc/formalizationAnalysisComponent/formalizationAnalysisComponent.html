<!-- sldsValidatorIgnore -->
<template>
    <lightning-card>
            <div slot="actions">
                <template if:true={analysisNotStarted}>
                    <lightning-button class="buttonBoxShadow slds-var-p-right_medium" variant="success" label="Iniciar Análise" title="Iniciar Análise" onclick={handleStartAnalysis}></lightning-button>
                </template>
               <template if:false={analysisNotStarted}>
                   <span>Análise iniciada em: {timeNow}</span>
               </template>
            </div>      
            <!-- SPINNER LOADING -->
            <template if:true={isLoading}>
                <lightning-spinner alternative-text="Loading" size="medium" variant="brand"></lightning-spinner>
            </template>
            <!-- ACCORDEON START-->
            <div class="slds-progress slds-progress_vertical slds-var-m-left_medium">
                <ol class="slds-accordion slds-progress__list">
                    <!-- FIRST ACCORDEON TAB -->
                    <div class="slds-progress__item">
                        <!-- PROGRESS RING REPLACES MARKER-->
                        <lightning-progress-ring value={p0Progress} variant={p0Variant} class="progressCSS"> </lightning-progress-ring>
                        <div class="slds-progress__item_content">
                            <li class="slds-accordion__list-item">
                                <section class="slds-accordion__section">
                                    <div class="slds-accordion__summary">
                                        <!-- CLICKABLE HEADER WITH FUNCTIONS -->
                                        <h2 class="slds-accordion__summary-heading">
                                            <button class="slds-button" onclick={handleAccordeon}
                                                aria-controls="referenceId-75" aria-expanded="true" title="Geral" value="0">                                                    
                                                <span class="slds-accordion__summary-content">Geral</span>
                                            </button>
                                        </h2>
                                    </div>
                                    <!-- ACCORDEON CONTENT -->
                                    <div class="slds-accordion__content" id="referenceId-75">
                                        <!-- FIELDS COMPONENT -->
                                        <template for:each={dataGeneral} for:item="item">
                                            <c-formalization-analysis-field key={item.id} input={item} onchangeprogress={handleProgress}></c-formalization-analysis-field>
                                        </template>
                                        <!-- SAVE BUTTON -->
                                        <div class="slds-grid slds-wrap slds-var-p-top_small">
                                            <div class="slds-col slds-size_10-of-12"> </div>
                                            <div class="slds-col slds-size_2-of-12 slds-align_absolute-center">
                                                <lightning-button class="buttonBoxShadow" variant="success" value="0" label="Salvar" title="Salvar" disabled={p0Disabled} onclick={handleSave}></lightning-button>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </li>
                        </div>
                    </div>
                    <!-- SECOND ACCORDEON TAB -->
                    <div class="slds-progress__item">
                        <!-- PROGRESS RING REPLACES MARKER-->
                        <lightning-progress-ring value={p1Progress} variant={p1Variant} class="progressCSS"> </lightning-progress-ring>
                        <div class="slds-progress__item_content">
                            <li class="slds-accordion__list-item">
                                <section class="slds-accordion__section">
                                    <div class="slds-accordion__summary">
                                        <!-- CLICKABLE HEADER WITH FUNCTIONS -->
                                        <h2 class="slds-accordion__summary-heading">
                                            <button class="slds-button" onclick={handleAccordeon}
                                                aria-controls="referenceId-76" aria-expanded="false" title="Dados Pessoais" value="1">                                                
                                                <span class="slds-accordion__summary-content">Dados Pessoais</span>
                                            </button>
                                        </h2>
                                    </div>
                                    <!-- ACCORDEON CONTENT -->
                                    <div class="slds-accordion__content" id="referenceId-76">
                                        <!-- FIELD COMPONENT -->
                                        <template for:each={dataPersonal} for:item="item">
                                            <c-formalization-analysis-field key={item.id} input={item} onchangeprogress={handleProgress}></c-formalization-analysis-field>
                                        </template>
                                        <!-- SAVE BUTTON -->
                                        <div class="slds-grid slds-wrap slds-var-p-top_small">
                                            <div class="slds-col slds-size_10-of-12"> </div>
                                            <div class="slds-col slds-size_2-of-12 slds-align_absolute-center">
                                                <lightning-button class="buttonBoxShadow"  variant="success" value="1" label="Salvar" title="Salvar" disabled={p1Disabled} onclick={handleSave}></lightning-button>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </li>
                        </div>
                    </div>
                    <!-- THIRD ACCORDEON TAB -->
                    <div class="slds-progress__item">
                        <!-- PROGRESS RING REPLACES MARKER-->
                        <lightning-progress-ring value={p2Progress} variant={p2Variant} class="progressCSS"> </lightning-progress-ring>
                        <div class="slds-progress__item_content">
                            <li class="slds-accordion__list-item">
                                <section class="slds-accordion__section">
                                    <div class="slds-accordion__summary">
                                        <!-- CLICKABLE HEADER WITH FUNCTIONS -->
                                        <h2 class="slds-accordion__summary-heading">
                                            <button class="slds-button" onclick={handleAccordeon}
                                                aria-controls="referenceId-77" aria-expanded="false" title="Dados de Contato" value="2">                                                
                                                <span class="slds-accordion__summary-content">Dados de Contato</span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div class="slds-accordion__content" id="referenceId-77">
                                        <!-- FIELD COMPONENT -->
                                        <template for:each={dataContact} for:item="item">
                                            <c-formalization-analysis-field key={item.id} input={item} onchangeprogress={handleProgress}></c-formalization-analysis-field>
                                        </template>
                                        <!-- SAVE BUTTON -->
                                        <div class="slds-grid slds-wrap slds-var-p-top_small">
                                            <div class="slds-col slds-size_10-of-12"> </div>
                                            <div class="slds-col slds-size_2-of-12 slds-align_absolute-center">
                                                <lightning-button class="buttonBoxShadow"  variant="success" value="2" label="Salvar" title="Salvar" disabled={p2Disabled} onclick={handleSave}></lightning-button>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </li>
                        </div>
                    </div>
                    <!-- FOURTH ACCORDEON TAB -->
                    <div class="slds-progress__item">
                        <!-- PROGRESS RING REPLACES MARKER-->
                        <lightning-progress-ring value={p3Progress} variant={p3Variant} class="progressCSS"> </lightning-progress-ring>
                        <div class="slds-progress__item_content">
                            <li class="slds-accordion__list-item">
                                <section class="slds-accordion__section">
                                    <div class="slds-accordion__summary">
                                        <!-- CLICKABLE HEADER WITH FUNCTIONS -->
                                        <h2 class="slds-accordion__summary-heading">
                                            <button class="slds-button" onclick={handleAccordeon}
                                                aria-controls="referenceId-78" aria-expanded="false" title="Dados de Endereço" value="3">                                                
                                                <span class="slds-accordion__summary-content">Dados de Endereço</span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div class="slds-accordion__content" id="referenceId-78">
                                        <!-- FIELD COMPONENT -->
                                        <template for:each={dataAddress} for:item="item">
                                            <c-formalization-analysis-field key={item.id} input={item} onchangeprogress={handleProgress}></c-formalization-analysis-field>
                                        </template>
                                        <!-- SAVE BUTTON -->
                                        <div class="slds-grid slds-wrap slds-var-p-top_small">
                                            <div class="slds-col slds-size_10-of-12"> </div>
                                            <div class="slds-col slds-size_2-of-12 slds-align_absolute-center">
                                                <lightning-button class="buttonBoxShadow"  variant="success" value="3" label="Salvar" title="Salvar" disabled={p3Disabled} onclick={handleSave}></lightning-button>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </li>
                        </div>
                    </div>
                    <!-- FIFTH ACCORDEON TAB -->
                    <div class="slds-progress__item">
                        <!-- PROGRESS RING REPLACES MARKER-->
                        <lightning-progress-ring value={p4Progress} variant={p4Variant} class="progressCSS"> </lightning-progress-ring>
                        <div class="slds-progress__item_content">
                            <li class="slds-accordion__list-item">
                                <section class="slds-accordion__section">
                                    <div class="slds-accordion__summary">
                                        <!-- CLICKABLE HEADER WITH FUNCTIONS -->
                                        <h2 class="slds-accordion__summary-heading">
                                            <button class="slds-button" onclick={handleAccordeon}
                                                aria-controls="referenceId-79" aria-expanded="false" title="Dados Bancários" value="4">                                                
                                                <span class="slds-accordion__summary-content">Dados Bancários</span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div class="slds-accordion__content" id="referenceId-79">
                                        <!-- FIELD COMPONENT -->
                                        <template for:each={dataBank} for:item="item">
                                            <c-formalization-analysis-field key={item.id} input={item} onchangeprogress={handleProgress}></c-formalization-analysis-field>
                                        </template>
                                        <!-- SAVE BUTTON -->
                                        <div class="slds-grid slds-wrap slds-var-p-top_small">
                                            <div class="slds-col slds-size_10-of-12"> </div>
                                            <div class="slds-col slds-size_2-of-12 slds-align_absolute-center">
                                                <lightning-button class="buttonBoxShadow"  variant="success" value="4" label="Salvar" title="Salvar" disabled={p4Disabled} onclick={handleSave}></lightning-button>
                                            </div>
                                        </div>                                        
                                    </div>
                                </section>
                            </li>
                        </div>
                    </div>
                    <!-- SIXTH ACCORDEON TAB -->
                    <div class="slds-progress__item">
                        <!-- PROGRESS RING REPLACES MARKER-->
                        <lightning-progress-ring value={p5Progress} variant={p5Variant} class="progressCSS"> </lightning-progress-ring>
                        <div class="slds-progress__item_content">
                            <li class="slds-accordion__list-item">
                                <section class="slds-accordion__section">
                                    <div class="slds-accordion__summary">
                                        <!-- CLICKABLE HEADER WITH FUNCTIONS -->
                                        <h2 class="slds-accordion__summary-heading">
                                            <button class="slds-button" onclick={handleAccordeon}
                                                aria-controls="referenceId-80" aria-expanded="false" title="Dados da Empresa" value="5">
                                                <span class="slds-accordion__summary-content">Dados da Empresa</span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div class="slds-accordion__content" id="referenceId-80">
                                        <!-- FIELD COMPONENT -->
                                        <template for:each={dataCompany} for:item="item">
                                            <c-formalization-analysis-field key={item.id} input={item} onchangeprogress={handleProgress}></c-formalization-analysis-field>
                                        </template>
                                        <!-- SAVE BUTTON -->
                                        <div class="slds-grid slds-wrap slds-var-p-top_small">
                                            <div class="slds-col slds-size_10-of-12"> </div>
                                            <div class="slds-col slds-size_2-of-12 slds-align_absolute-center">
                                                <lightning-button class="buttonBoxShadow" variant="success" value="5" label="Salvar" title="Salvar" disabled={p5Disabled} onclick={handleSave}></lightning-button>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </li>
                        </div>
                    </div>
                    <!-- SEVENTH ACCORDEON TAB -->
                    
                        <div class="slds-progress__item">
                           <!-- PROGRESS RING REPLACES MARKER -->
                            <lightning-progress-ring value={p6Progress} variant={p6Variant} class="progressCSS"> </lightning-progress-ring>
                            <div class="slds-progress__item_content">
                                <li class="slds-accordion__list-item">
                                    <section class="slds-accordion__section">
                                        <div class="slds-accordion__summary">
                                           <!-- CLICKABLE HEADER WITH FUNCTIONS -->
                                            <h2 class="slds-accordion__summary-heading">
                                                <button class="slds-button" onclick={handleAccordeon}
                                                    aria-controls="referenceId-81" aria-expanded="false" title="Links Rápidos" value="6">                                                
                                                    <span class="slds-accordion__summary-content">Links Rápidos</span>
                                                </button>
                                            </h2>
                                        </div>
                                        <div class="slds-accordion__content" id="referenceId-81">
                                            <!-- ACCORDEON CONTENT HERE  -->
                                            <lightning-layout>
                                                <lightning-layout-item flexibility="auto" padding="around-small">
                                                    
                                                    <lightning-formatted-url value="https://www.brflow.com.br/autenticacao/autenticacao/login" label="BRFlow" target="_blank"></lightning-formatted-url>
                                                    
                                                </lightning-layout-item>
                                                <lightning-layout-item flexibility="auto" padding="around-small">
                                                    
                                                    <lightning-formatted-url value="https://app.clearsale.com.br/v2/Autenticacao/" label="Data Trust" target="_blank"></lightning-formatted-url>
                                                    
                                                </lightning-layout-item>
                                                <lightning-layout-item flexibility="auto" padding="around-small">
                                                    
                                                    <lightning-formatted-url value="https://app.emailage.com/login?ReturnUrl=%2fquery" label="Emailege" target="_blank"></lightning-formatted-url>
                                                    
                                                </lightning-layout-item>
                                                <lightning-layout-item flexibility="auto" padding="around-small">
                                                    
                                                    <lightning-formatted-url value="https://site3.allcheck.info/allcheck_produtos/techEngine?sid=allcheck_produtos&command=main" label="All Check" target="_blank"></lightning-formatted-url>
                                                    
                                                </lightning-layout-item>
                                                <lightning-layout-item flexibility="auto" padding="around-small">
                                                    
                                                    <lightning-formatted-url value="https://creditas.myvtex.com/_v/segment/admin-login/v1/login?returnUrl=%2Fadmin%2Fcheckout%2F%3F#/orders?f_creationDate=creationDate:%5B2020-12-07T03:00:00.000Z%20TO%202020-12-08T02:59:59.999Z%5D&orderBy=creationDate,desc" label="VTEX" target="_blank"></lightning-formatted-url>
                                                    
                                                </lightning-layout-item>
                                                <lightning-layout-item flexibility="auto" padding="around-small">
                                                    
                                                    <lightning-formatted-url value="https://www.oititec.com.br/" label="OITI" target="_blank"></lightning-formatted-url>

                                                </lightning-layout-item>
                                                
                                                
                                            </lightning-layout>
                                        </div>
                                    </section>
                                </li>
                            </div>
                        </div>
                </ol>
            </div>
        
        <footer class="slds-modal__footer slds-m-top_small">
            <div class="slds-align_absolute-center">
                <lightning-button class="slds-m-right_small buttonBoxShadow buttonApprove" variant="success" label="Aprovar" title="Aprovar" disabled={approveDisabled}></lightning-button>
                <lightning-button class="slds-m-right_small buttonBoxShadow buttonReject" variant="success" label ="Reprovar" title="Reprovar" disabled={rejectDisabled}></lightning-button>
                <lightning-button class="slds-m-right_small buttonBoxShadow buttonPendency" variant="success" label="Pendenciar" title="Pendenciar" disabled={pendencyDisabled}></lightning-button>
                <lightning-button class="slds-float_right buttonBoxShadow" variant="brand-outline" label="Comitê" title="Comitê"></lightning-button>
            </div>  
        </footer>
    </lightning-card>
</template>